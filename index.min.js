export const localize=(t,e)=>{const a=()=>{let e=localStorage.getItem("language")||navigator.language||navigator.userLanguage;document.documentElement.lang=e;const a=new URLSearchParams(window.location.search).get("lang");a&&(e=a,localStorage.setItem("language",a));const o=new XMLHttpRequest;o.open("GET",`${t}${e}.json`),o.onload=()=>{if(200===o.status){const t=JSON.parse(o.responseText);n(t)}else{const e=new XMLHttpRequest;e.open("GET",`${t}en.json`),e.onload=()=>{if(200===e.status){const t=JSON.parse(e.responseText);n(t)}},e.send()}},o.send()},n=t=>{document.querySelectorAll("[data-localize]").forEach((e=>{const a=e.getAttribute("data-localize");a&&t[a]&&(e.textContent=t[a])}))};a(),(t=>{t&&t.addEventListener("click",(t=>{if(t.target&&t.target.matches("button[data-lang]")){const e=t.target.getAttribute("data-lang");e&&(t=>{localStorage.setItem("language",t);const e=new URLSearchParams(window.location.search);e.set("lang",t),window.history.replaceState({},"",`${window.location.pathname}?${e}`),document.documentElement.lang=t,a()})(e)}}))})(e)};