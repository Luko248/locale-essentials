export const localize=(t,e="en",a)=>{const n=()=>{let a=localStorage.getItem("language")||navigator.language||navigator.userLanguage;document.documentElement.lang=a;const n=new URLSearchParams(window.location.search).get("lang");n&&(a=n,localStorage.setItem("language",n));const s=new XMLHttpRequest;s.open("GET",`${t}${a}.json`),s.onload=()=>{if(200===s.status){const t=JSON.parse(s.responseText);o(t)}else{const a=new XMLHttpRequest;a.open("GET",`${t}${e}.json`),a.onload=()=>{if(200===a.status){const t=JSON.parse(a.responseText);o(t)}},a.send()}},s.send()},o=t=>{document.querySelectorAll("[data-localize]").forEach((e=>{const a=e.getAttribute("data-localize");a&&t[a]&&(e.textContent=t[a])}))};n(),(t=>{t&&t.addEventListener("click",(t=>{if(t.target&&t.target.matches("button[data-lang]")){const e=t.target.getAttribute("data-lang");e&&(t=>{localStorage.setItem("language",t);const e=new URLSearchParams(window.location.search);e.set("lang",t),window.history.replaceState({},"",`${window.location.pathname}?${e}`),document.documentElement.lang=t,n()})(e)}}))})(a)};