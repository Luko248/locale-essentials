export const localize=e=>{const{langDirectory:t,defaultLanguage:a="en",langSwitch:n}=e,o=()=>{let e=localStorage.getItem("language")||navigator.language||navigator.userLanguage;document.documentElement.lang=e;const n=new URLSearchParams(window.location.search).get("lang");n&&(e=n,localStorage.setItem("language",n));const o=new XMLHttpRequest;o.open("GET",`${t}${e}.json`),o.onload=()=>{if(200===o.status){const e=JSON.parse(o.responseText);l(e)}else{const e=new XMLHttpRequest;e.open("GET",`${t}${a}.json`),e.onload=()=>{if(200===e.status){const t=JSON.parse(e.responseText);l(t)}},e.send()}},o.send()},l=e=>{document.querySelectorAll("[data-localize]").forEach((t=>{const a=t.getAttribute("data-localize");if(a&&e[a]){const n=t.tagName.toLowerCase();["title","aria-label","placeholder"].includes(n)?t.setAttribute(n,e[a]):t.textContent=e[a]}}))};o(),(e=>{e&&e.addEventListener("click",(e=>{if(e.target&&e.target.matches("button[data-lang]")){const t=e.target.getAttribute("data-lang");t&&(e=>{localStorage.setItem("language",e);const t=new URLSearchParams(window.location.search);t.set("lang",e),window.history.replaceState({},"",`${window.location.pathname}?${t}`),document.documentElement.lang=e,o()})(t)}}))})(n)};