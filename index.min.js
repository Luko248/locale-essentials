export const localize=t=>{const{langDirectory:e,defaultLanguage:a="en",langSwitch:n}=t,o=()=>{let t=localStorage.getItem("language")||navigator.language||navigator.userLanguage;document.documentElement.lang=t;const n=new URLSearchParams(window.location.search).get("lang");n&&(t=n,localStorage.setItem("language",n));const o=new XMLHttpRequest;o.open("GET",`${e}${t}.json`),o.onload=()=>{if(200===o.status){const t=JSON.parse(o.responseText);l(t)}else{const t=new XMLHttpRequest;t.open("GET",`${e}${a}.json`),t.onload=()=>{if(200===t.status){const e=JSON.parse(t.responseText);l(e)}},t.send()}},o.send()},l=t=>{document.querySelectorAll("[data-localize]").forEach((e=>{const a=e.getAttribute("data-localize");a&&t[a]&&(e.textContent=t[a])}))};o(),(t=>{t&&t.addEventListener("click",(t=>{if(t.target&&t.target.matches("button[data-lang]")){const e=t.target.getAttribute("data-lang");e&&(t=>{localStorage.setItem("language",t);const e=new URLSearchParams(window.location.search);e.set("lang",t),window.history.replaceState({},"",`${window.location.pathname}?${e}`),document.documentElement.lang=t,o()})(e)}}))})(n)};